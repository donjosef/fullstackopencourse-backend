{"version":3,"sources":["components/Filter.js","components/Form.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","filterValue","onChangeFilter","value","onChange","type","Form","onSubmit","newName","newNumber","onChangeName","onChangeNumber","Persons","filteredPersons","onDeletePerson","map","person","key","name","number","onClick","id","Notification","notificationMessage","errorMessage","style","position","top","left","transform","padding","background","borderRadius","color","fontWeight","baseUrl","App","useState","persons","setPersons","setNewName","setNewNumber","setFilterValue","setNotificationMessage","setErrorMessage","useEffect","axios","get","then","res","data","regex","RegExp","filter","test","e","target","preventDefault","existingPerson","find","window","confirm","updatedPerson","put","updatePerson","p","setTimeout","catch","err","response","status","error","post","createPerson","concat","delete","deletePerson","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8a1ad70a.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({filterValue, onChangeFilter}) => {\r\n    return (\r\n        <label>\r\n            Filter persons: <input value={filterValue} onChange={onChangeFilter} type=\"text\" />\r\n        </label>\r\n    )\r\n}\r\n\r\nexport default Filter;","import React from 'react';\r\n\r\nconst Form = ({onSubmit, newName, newNumber, onChangeName, onChangeNumber}) => {\r\n    return (\r\n        <form onSubmit={onSubmit}>\r\n            <div>name: <input value={newName} onChange={onChangeName} /></div>\r\n            <div>number: <input value={newNumber} onChange={onChangeNumber} /></div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default Form;\r\n","import React from 'react';\r\n\r\nconst Persons = ({ filteredPersons, onDeletePerson }) => {\r\n    return (\r\n        <ul>\r\n            {filteredPersons.map(person => {\r\n                return (\r\n                    <li key={person.name}>\r\n                        <span>{person.name}</span>\r\n                        <span>{person.number}</span>\r\n                        <button onClick={() => onDeletePerson(person.id)}>Delete</button>\r\n                    </li>\r\n                )\r\n            })}\r\n        </ul>\r\n    )\r\n}\r\n\r\nexport default Persons;","import React from 'react';\r\n\r\nconst Notification = ({ notificationMessage, errorMessage }) => {\r\n    \r\n    return (\r\n        <>\r\n            {(notificationMessage || errorMessage) && (\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    top: '10%',\r\n                    left: '50%',\r\n                    transform: 'translateX(-50%)',\r\n                    padding: 20,\r\n                    background: '#f2f2f2',\r\n                    borderRadius: 5,\r\n                    color: notificationMessage ? 'green' : 'red',\r\n                    fontWeight: 'bold'\r\n                }}>\r\n                    <p>{notificationMessage || errorMessage}</p>\r\n                </div>\r\n            )}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Notification;","import axios from 'axios';\r\nconst baseUrl = '/api/persons';\r\n\r\nexport const getAll = () => {\r\n    return axios\r\n    .get(baseUrl)\r\n    .then(res => res.data)\r\n}\r\n\r\nexport const createPerson = (person) => {\r\n    return axios\r\n    .post(baseUrl, person)\r\n    .then(res => res.data)\r\n}\r\n\r\nexport const deletePerson = (id) => {\r\n    return axios\r\n    .delete(`${baseUrl}/${id}`)\r\n    .then(res => res.data)\r\n}\r\n\r\nexport const updatePerson = (id, person) => {\r\n    return axios\r\n        .put(`${baseUrl}/${id}`, person)\r\n        .then(res => res.data)\r\n}","import React, { useState, useEffect } from 'react';\nimport Filter from './components/Filter';\nimport Form from './components/Form';\nimport Persons from './components/Persons';\nimport Notification from './components/Notification';\nimport { getAll, createPerson, deletePerson, updatePerson } from './services/persons';\n\nimport './App.css';\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filterValue, setFilterValue] = useState('')\n  const [notificationMessage, setNotificationMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    getAll()\n      .then(persons => {\n        setPersons(persons)\n      })\n  }, [])\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const existingPerson = persons.find(person => person.name === newName);\n    if (existingPerson) {\n      const confirmUpdate = window.confirm(`${existingPerson.name} already exists. Do you want to change the old number?`);\n      if (confirmUpdate) {\n        const updatedPerson = {\n          name: newName,\n          number: newNumber\n        };\n\n        updatePerson(existingPerson.id, updatedPerson)\n          .then(updatedPerson => {\n            setPersons(persons.map(p => p.id === updatedPerson.id ? updatedPerson : p))\n            setNotificationMessage(`Updated number of ${updatedPerson.name}`)\n            setTimeout(() => {\n              setNotificationMessage(null)\n            }, 3000);\n          })\n          .catch(err => {\n            if(err.response.status === 404) {\n              setErrorMessage(`Cannot update ${updatedPerson.name}. Its information has already been deleted from the server`)\n            }\n            if(err.response.status === 400) {\n              setErrorMessage(err.response.data.error)\n            }\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 3000)\n          })\n      }\n\n    } else {\n      const person = {\n        name: newName,\n        number: newNumber\n      };\n      createPerson(person)\n        .then(person => {\n          setPersons(persons.concat(person))\n          setNotificationMessage(`${person.name} added to the phonebook`)\n          setTimeout(() => {\n            setNotificationMessage(null)\n          }, 3000);\n        })\n        .catch(err => {\n          setErrorMessage(err.response.data.error)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 3000)\n        })\n      setNewName('')\n      setNewNumber('')\n    }\n  }\n\n  const handleChangeName = e => {\n    setNewName(e.target.value)\n  }\n\n  const handleChangeNumber = e => {\n    setNewNumber(e.target.value)\n  }\n\n  const handleFilter = e => {\n    setFilterValue(e.target.value)\n  }\n\n  const handleDeletePerson = (id) => {\n    const person = persons.find(p => p.id === id);\n    const confirmDeletion = window.confirm(`Delete ${person.name}?`);\n    if (confirmDeletion) {\n      deletePerson(id)\n        .then(() => {\n          setPersons(persons.filter(person => person.id !== id))\n        })\n    }\n  }\n\n  let filteredPersons = persons;\n  if (filterValue) {\n    const regex = new RegExp(filterValue, 'i');\n    filteredPersons = persons.filter(person => regex.test(person.name))\n  }\n\n  return (\n    <div>\n      <Notification notificationMessage={notificationMessage} errorMessage={errorMessage} />\n      <h2>Phonebook</h2>\n      <Filter filterValue={filterValue} onChangeFilter={handleFilter} />\n      <h2>Add new person</h2>\n      <Form\n        onSubmit={handleSubmit}\n        onChangeName={handleChangeName}\n        onChangeNumber={handleChangeNumber}\n        newName={newName}\n        newNumber={newNumber} />\n      <h2>Numbers</h2>\n      <Persons filteredPersons={filteredPersons} onDeletePerson={handleDeletePerson} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}