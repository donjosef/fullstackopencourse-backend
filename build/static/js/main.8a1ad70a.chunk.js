(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(38)},19:function(e,n,t){},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),u=t.n(o),c=(t(19),t(2)),l=function(e){var n=e.filterValue,t=e.onChangeFilter;return r.a.createElement("label",null,"Filter persons: ",r.a.createElement("input",{value:n,onChange:t,type:"text"}))},i=function(e){var n=e.onSubmit,t=e.newName,a=e.newNumber,o=e.onChangeName,u=e.onChangeNumber;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:o})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:a,onChange:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},m=function(e){var n=e.filteredPersons,t=e.onDeletePerson;return r.a.createElement("ul",null,n.map((function(e){return r.a.createElement("li",{key:e.name},r.a.createElement("span",null,e.name),r.a.createElement("span",null,e.number),r.a.createElement("button",{onClick:function(){return t(e.id)}},"Delete"))})))},s=function(e){var n=e.notificationMessage,t=e.errorMessage;return r.a.createElement(r.a.Fragment,null,(n||t)&&r.a.createElement("div",{style:{position:"absolute",top:"10%",left:"50%",transform:"translateX(-50%)",padding:20,background:"#f2f2f2",borderRadius:5,color:n?"green":"red",fontWeight:"bold"}},r.a.createElement("p",null,n||t)))},f=t(3),d=t.n(f),b="/api/persons",p=(t(37),function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(""),f=Object(c.a)(u,2),p=f[0],h=f[1],E=Object(a.useState)(""),g=Object(c.a)(E,2),v=g[0],j=g[1],w=Object(a.useState)(""),O=Object(c.a)(w,2),C=O[0],S=O[1],k=Object(a.useState)(null),N=Object(c.a)(k,2),y=N[0],D=N[1],M=Object(a.useState)(null),P=Object(c.a)(M,2),x=P[0],F=P[1];Object(a.useEffect)((function(){d.a.get(b).then((function(e){return e.data})).then((function(e){o(e)}))}),[]);var T=t;if(C){var I=new RegExp(C,"i");T=t.filter((function(e){return I.test(e.name)}))}return r.a.createElement("div",null,r.a.createElement(s,{notificationMessage:y,errorMessage:x}),r.a.createElement("h2",null,"Phonebook"),r.a.createElement(l,{filterValue:C,onChangeFilter:function(e){S(e.target.value)}}),r.a.createElement("h2",null,"Add new person"),r.a.createElement(i,{onSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===p}));if(n){if(window.confirm("".concat(n.name," already exists. Do you want to change the old number?"))){var a={name:p,number:v};(function(e,n){return d.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))})(n.id,a).then((function(e){o(t.map((function(n){return n.id===e.id?e:n}))),D("Updated number of ".concat(e.name)),setTimeout((function(){D(null)}),3e3)})).catch((function(e){404===e.response.status&&F("Cannot update ".concat(a.name,". Its information has already been deleted from the server")),400===e.response.status&&F(e.response.data.error),setTimeout((function(){F(null)}),3e3)}))}}else(function(e){return d.a.post(b,e).then((function(e){return e.data}))})({name:p,number:v}).then((function(e){o(t.concat(e)),D("".concat(e.name," added to the phonebook")),setTimeout((function(){D(null)}),3e3)})).catch((function(e){F(e.response.data.error),setTimeout((function(){F(null)}),3e3)})),h(""),j("")},onChangeName:function(e){h(e.target.value)},onChangeNumber:function(e){j(e.target.value)},newName:p,newNumber:v}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(m,{filteredPersons:T,onDeletePerson:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name,"?"))&&function(e){return d.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))}(e).then((function(){o(t.filter((function(n){return n.id!==e})))}))}}))});u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.8a1ad70a.chunk.js.map